<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Escape Game</title>
<link rel="manifest" href="manifest.json">
<style>
  body {
    background-color: black;
    font-family: Arial, sans-serif;
    text-align: center;
    color: white;
    margin: 0;
    padding: 0;
  }
  button {
    display: block;
    margin: 20px auto;
    padding: 15px 30px;
    font-size: 18px;
    border: none;
    cursor: pointer;
  }
  .rosso { background-color: red; color: white; }
  .verde { background-color: green; color: black; }
  .bianco { background-color: white; color: black; }
  #schermata-finale { position: fixed; top:0; left:0; width:100%; height:100%; display:flex; flex-direction:column; justify-content:center; align-items:center; }
</style>
</head>
<body>

<h1>Escape Game</h1>

<button id="btnCamera" class="rosso" onclick="sbloccaCamera()">CAMERA</button>
<button id="btnSgabuzzino" class="rosso" onclick="sbloccaSgabuzzino()">SGABUZZINO</button>
<button id="btnPorta" class="bianco" onclick="sbloccaPorta()">PORTA SEGRETA ðŸ”’</button>

<script>
let cameraSbloccata = false;
let sgabuzzinoSbloccato = false;
let portaSbloccata = false;

// Funzione per Camera
function sbloccaCamera() {
    if(cameraSbloccata) {
        alert("Porta giÃ  aperta");
        return;
    }
    let pin = prompt("Inserisci PIN Camera:");
    if(pin === "4549") {
        alert("Porta Camera sbloccata con successo!");
        cameraSbloccata = true;
        document.getElementById("btnCamera").className = "verde";
        document.getElementById("btnCamera").innerText = "CAMERA âœ…";
        // Porta Segreta diventa rosso
        document.getElementById("btnPorta").className = "rosso";
        document.getElementById("btnPorta").innerText = "PORTA SEGRETA - LETTO";
    } else {
        alert("PIN errato");
    }
}

// Funzione per Sgabuzzino
function sbloccaSgabuzzino() {
    if(sgabuzzinoSbloccato) {
        alert("Porta giÃ  aperta");
        return;
    }
    let pin = prompt("Inserisci PIN Sgabuzzino:");
    if(pin === "5731") {
        alert("Porta Sgabuzzino sbloccata con successo!");
        sgabuzzinoSbloccato = true;
        document.getElementById("btnSgabuzzino").className = "verde";
        document.getElementById("btnSgabuzzino").innerText = "SGABUZZINO âœ…";
    } else {
        alert("PIN errato");
    }
}

// Funzione per Porta Segreta
function sbloccaPorta() {
    if(!cameraSbloccata) {
        alert("Devi prima sbloccare la Camera!");
        return;
    }
    if(portaSbloccata) {
        alert("Porta giÃ  aperta");
        return;
    }
    let pin = prompt("Inserisci PIN Porta Segreta:");
    if(pin === "9418") {
        portaSbloccata = true;
        document.getElementById("btnPorta").className = "verde";
        document.getElementById("btnPorta").innerText = "PORTA SEGRETA - LETTO âœ…";

        // Sfondo finale azzurro
        document.body.style.backgroundColor = "skyblue";

        // Div finale
        if(!document.getElementById("schermata-finale")) {
            const finale = document.createElement("div");
            finale.id = "schermata-finale";
            finale.innerHTML = `
                <h1 style="color:black; text-align:center; margin-top:0;">Ãˆ ORA<br>DI APRIRE<br>IL TUO REGALO</h1>
                <p style="color:black; text-align:center;">Powered by Patato</p>
            `;
            document.body.appendChild(finale);
        }

        alert("Porta segreta sbloccata con successo!");
    } else {
        alert("PIN errato");
    }
}
</script>

</body>
</html>
